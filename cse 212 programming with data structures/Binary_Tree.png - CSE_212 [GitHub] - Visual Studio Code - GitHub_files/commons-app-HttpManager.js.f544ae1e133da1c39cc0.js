"use strict";(self.webpackChunkcodespaces_web_client=self.webpackChunkcodespaces_web_client||[]).push([[554],{98761:(e,n,t)=>{t.d(n,{x:()=>k});var r,a=t(9895),o=t(39312),s=t(6806),i=t(96933),u=t(28185),c=t(55028),d=t(8823),l=t(14270),f=t(31819),h=t(96247),v=t(99322),p=t(45464),y="&"+h.Zv+"=true",g=((r={})[1]=h.WA,r[100]=h.WA,r[200]="sent",r[8004]=h.$W,r[8003]=h.$W,r),m={},S={};function b(e,n,t){m[e]=n,!1!==t&&(S[n]=e)}function w(e){try{return e.responseText}catch(e){}return""}function T(e,n){var t=!1;if(e&&n){var r=(0,i.FY)(e);if(r&&r.length>0)for(var a=n.toLowerCase(),o=0;o<r.length;o++){var s=r[o];if(s&&(0,i.nr)(n,s)&&s.toLowerCase()===a){t=!0;break}}}return t}function _(e,n,t,r){n&&t&&t.length>0&&(r&&m[n]?(e.hdrs[m[n]]=t,e.useHdrs=!0):e.url+="&"+n+"="+t)}b(h.j9,h.j9,!1),b(h.Ft,h.Ft),b(h.kd,"Client-Id"),b(h.iV,h.iV),b(h.cE,h.cE),b(h.TB,h.TB),b(h.dG,h.dG);var k=function(){function e(n,t,r,m,b){this._responseHandlers=[];var k,H,P,R,C,E,O,B="?cors=true&"+h.V2.toLowerCase()+"="+h.ME,K=new s.Z,x=!1,L=new o.Z,M=!1,z=0,A=!0,F=[],U={},W=[],j=null,q=!1,V=!1,X=!1;(0,a.Z)(e,this,(function(e){var a=!0;function o(e,n){for(var t=0,r=null,a=0;null==r&&a<e.length;)1===(t=e[a])?(0,u.cp)()?r=s:(0,u.Z3)()&&(r=D):2===t&&(0,u.JO)(n)?r=$:M&&3===t&&(0,u.MF)()&&(r=I),a++;return r?{_transport:t,_isSync:n,sendPOST:r}:null}function s(e,n,t){var r=new XDomainRequest;r.open(h.aG,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=w(r);G(n,200,{},e),se(e)},r.onerror=function(){G(n,400,{})},r.ontimeout=function(){G(n,500,{})},r.onprogress=function(){},t?r.send(e.data):b.set((function(){r.send(e.data)}),0)}function $(e,n,t){var r,o=e.urlString,s=!1,u=!1,c=((r={body:e.data,method:h.aG})[h.Fb]=!0,r);t&&(c.keepalive=!0,2===e._sendReason&&(s=!0,o+=y)),a&&(c.credentials="include"),e.headers&&(0,i.FY)(e.headers).length>0&&(c.headers=e.headers),fetch(o,c).then((function(e){var t={},r="",a=e.headers;a&&a.forEach((function(e,n){t[n]=e})),e.body&&e.text().then((function(e){r=e})),u||(u=!0,G(n,e.status,t,r),se(r))})).catch((function(e){u||(u=!0,G(n,0,{}))})),s&&!u&&(u=!0,G(n,200,{})),!u&&e.timeout>0&&b.set((function(){u||(u=!0,G(n,500,{}))}),e.timeout)}function D(e,n,t){var r=e.urlString;function o(e,n,t){if(!e[t]&&n&&n.getResponseHeader){var r=n.getResponseHeader(t);r&&(e[t]=(0,i.nd)(r))}return e}function s(e){var n={};return e.getAllResponseHeaders?n=function(e){var n={};if((0,i.HD)(e)){var t=(0,i.nd)(e).split(/[\r\n]+/);(0,i.tO)(t,(function(e){if(e){var t=e.indexOf(": ");if(-1!==t){var r=(0,i.nd)(e.substring(0,t)).toLowerCase(),a=(0,i.nd)(e.substring(t+1));n[r]=a}else n[(0,i.nd)(e)]=1}}))}return n}(e.getAllResponseHeaders()):(n=o(n,e,h.EY),n=o(n,e,h.iP),n=o(n,e,h.oW)),n}function u(e,t){G(n,e.status,s(e),t)}t&&e.disableXhrSync&&(t=!1);var c=(0,d.ot)(h.aG,r,a,!0,t,e.timeout);(0,i.rW)(e.headers,(function(e,n){c.setRequestHeader(e,n)})),c.onload=function(){var e=w(c);u(c,e),se(e)},c.onerror=function(){u(c)},c.ontimeout=function(){u(c)},c.send(e.data)}function G(e,n,t,r){try{e(n,t,r)}catch(e){(0,c.kP)(H,2,518,(0,u.eU)(e))}}function I(e,n,t){var r=200,a=e._thePayload,o=e.urlString+y;try{var s=(0,u.jW)();if(!s.sendBeacon(o,e.data))if(a){var d=[];(0,i.tO)(a.batches,(function(e){if(d&&e&&e.count()>0){for(var n=e.events(),t=0;t<n.length;t++)if(!s.sendBeacon(o,j.getEventBlob(n[t]))){d.push(e.split(t));break}}else d.push(e.split(0))})),ie(d,8003,a.sendType,!0)}else r=0}catch(e){(0,c.jV)(H,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.eU)(e)),r=0}finally{G(n,r,{},"")}}function Y(e){return 2===e||3===e}function Z(e){return V&&Y(e)&&(e=2),e}function N(){return!x&&z<t}function Q(){var e=W;return W=[],e}function J(e,n,t){var r=!1;return e&&e.length>0&&!x&&P[n]&&j&&(r=0!==n||N()&&(t>0||L.allowRequestSending())),r}function ee(e){var n={};return e&&(0,i.tO)(e,(function(e,t){n[t]={iKey:e.iKey(),evts:e.events()}})),n}function ne(e,t,r,a,o){if(e&&0!==e.length)if(x)ie(e,1,a);else{a=Z(a);try{var s=e,i=0!==a;(0,l.Lm)(R,(function(){return"HttpManager:_sendBatches"}),(function(s){s&&(e=e.slice(0));for(var c=[],l=null,f=(0,d.hK)(),h=P[a]||(i?P[1]:P[0]),v=(V||Y(a)||h&&3===h._transport)&&!A&&M&&(0,u.MF)();J(e,a,t);){var p=e.shift();p&&p.count()>0&&(K.isTenantKilled(p.iKey())?c.push(p):(l=l||j.createPayload(t,r,i,v,o,a),j.appendPayload(l,p,n)?null!==l.overflow&&(e=[l.overflow].concat(e),l.overflow=null,ae(l,f,(0,d.hK)(),o),f=(0,d.hK)(),l=null):(ae(l,f,(0,d.hK)(),o),f=(0,d.hK)(),e=[p].concat(e),l=null)))}l&&ae(l,f,(0,d.hK)(),o),e.length>0&&(W=e.concat(W)),ie(c,8004,a)}),(function(){return{batches:ee(s),retryCount:t,isTeardown:r,isSynchronous:i,sendReason:o,useSendBeacon:Y(a),sendType:a}}),!i)}catch(e){(0,c.kP)(H,2,48,"Unexpected Exception sending batch: "+(0,u.eU)(e))}}}function te(e,n){var t={url:B,hdrs:{},useHdrs:!1};n?(t.hdrs=(0,d.l7)(t.hdrs,U),t.useHdrs=(0,i.FY)(t.hdrs).length>0):(0,i.rW)(U,(function(e,n){S[e]?_(t,S[e],n,!1):(t.hdrs[e]=n,t.useHdrs=!0)})),_(t,h.kd,"NO_AUTH",n),_(t,h.Ft,d.vs,n);var r="";(0,i.tO)(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),_(t,h.iV,r,n),_(t,h.TB,(0,i.m6)().toString(),n);var a=function(e){for(var n=0;n<e.batches.length;n++){var t=e.batches[n].Msfpc();if(t)return encodeURIComponent(t)}return""}(e);if((0,d.Sn)(a)&&(t.url+="&ext.intweb.msfpc="+a),L.shouldAddClockSkewHeaders()&&_(t,h.cE,L.getClockSkewHeaderValue(),n),R.getWParam){var o=R.getWParam();o>=0&&(t.url+="&w="+o)}for(var s=0;s<F.length;s++)t.url+="&"+F[s].name+"="+F[s].value;return t}function re(e,n,t){e[n]=e[n]||{},e[n][k.identifier]=t}function ae(n,t,a,o){if(n&&n.payloadBlob&&n.payloadBlob.length>0){var s=!!e.sendHook,p=P[n.sendType];!Y(n.sendType)&&n.isBeacon&&2===n.sendReason&&(p=P[2]||P[3]||p);var y=X;(n.isBeacon||3===p._transport)&&(y=!1);var g=te(n,y);y=y||g.useHdrs;var m=(0,d.hK)();(0,l.Lm)(R,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var S=0;S<n.batches.length;S++)for(var b=n.batches[S].events(),w=0;w<b.length;w++){var _=b[w];if(q){var P=_.timings=_.timings||{};re(P,"sendEventStart",m),re(P,"serializationStart",t),re(P,"serializationCompleted",a)}_.sendAttempt>0?_.sendAttempt++:_.sendAttempt=1}ie(n.batches,1e3+(o||0),n.sendType,!0);var C={data:n.payloadBlob,urlString:g.url,headers:g.hdrs,_thePayload:n,_sendReason:o,timeout:E};(0,i.o8)(O)||(C.disableXhrSync=!!O),y&&(T(C.headers,h.Hf)||(C.headers[h.Hf]=h.dI),T(C.headers,h.V2)||(C.headers[h.V2]=h.ME));var B=null;p&&(B=function(t){L.firstRequestSent();var a=function(t,a){!function(n,t,a,o){var s=9e3,u=null,c=!1,l=!1;try{var p=!0;if(typeof n!==f.jA){if(t){L.setClockSkew(t[h.EY]);var y=t[h.iP]||t["kill-duration-seconds"];(0,i.tO)(K.setKillSwitchTenants(t[h.fs],y),(function(e){(0,i.tO)(a.batches,(function(n){if(n.iKey()===e){u=u||[];var t=n.split(0);a.numEvents-=t.count(),u.push(t)}}))}))}if(200==n||204==n)return void(s=200);(!(0,v.D)(n)||a.numEvents<=0)&&(p=!1),s=9e3+n%1e3}if(p){s=100;var g=a.retryCnt;0===a.sendType&&(g<r?(c=!0,oe((function(){0===a.sendType&&z--,ne(a.batches,g+1,a.isTeardown,V?2:a.sendType,5)}),V,(0,v.e)(g))):(l=!0,V&&(s=8001)))}}finally{c||(L.setClockSkew(),function(n,t,r,a){try{a&&k._backOffTransmission(),200===t&&(a||n.isSync||k._clearBackOff(),function(e){if(q){var n=(0,d.hK)();(0,i.tO)(e,(function(e){e&&e.count()>0&&function(e,n){q&&(0,i.tO)(e,(function(e){re(e.timings=e.timings||{},"sendEventCompleted",n)}))}(e.events(),n)}))}}(n.batches)),ie(n.batches,t,n.sendType,!0)}finally{0===n.sendType&&(z--,5!==r&&e.sendQueuedRequests(n.sendType,r))}}(a,s,o,l)),ie(u,8004,a.sendType)}}(t,a,n,o)},s=n.isTeardown||n.isSync;try{p.sendPOST(t,a,s),e.sendListener&&e.sendListener(C,t,s,n.isBeacon)}catch(e){(0,c.jV)(H,"Unexpected exception sending payload. Ex:"+(0,u.eU)(e)),G(a,0,{})}}),(0,l.Lm)(R,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(B)if(0===n.sendType&&z++,s&&!n.isBeacon&&3!==p._transport){var t={data:C.data,urlString:C.urlString,headers:(0,d.l7)({},C.headers),timeout:C.timeout,disableXhrSync:C.disableXhrSync},r=!1;(0,l.Lm)(R,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(t,(function(e){r=!0,A||e._thePayload||(e._thePayload=e._thePayload||C._thePayload,e._sendReason=e._sendReason||C._sendReason),B(e)}),n.isSync||n.isTeardown)}catch(e){r||B(C)}}))}else B(C)}))}),(function(){return{thePayload:n,serializationStart:t,serializationCompleted:a,sendReason:o}}),n.isSync)}n.sizeExceed&&n.sizeExceed.length>0&&ie(n.sizeExceed,8003,n.sendType),n.failedEvts&&n.failedEvts.length>0&&ie(n.failedEvts,8002,n.sendType)}function oe(e,n,t){n?e():b.set(e,t)}function se(n){var t=e._responseHandlers;try{for(var r=0;r<t.length;r++)try{t[r](n)}catch(e){(0,c.kP)(H,1,519,"Response handler failed: "+e)}if(n){var a=JSON.parse(n);(0,d.Sn)(a.webResult)&&(0,d.Sn)(a.webResult[h.fz])&&C.set("MSFPC",a.webResult[h.fz],31536e3)}}catch(e){}}function ie(e,n,t,r){if(e&&e.length>0&&m){var a=m[function(e){var n=g[e];(0,d.Sn)(n)||(n=h.E_,e>=9e3&&e<=9999?n=h.xv:e>=8e3&&e<=8999?n=h.$W:e>=1e3&&e<=1999&&(n=h.jv));return n}(n)];if(a){var o=0!==t;(0,l.Lm)(R,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){oe((function(){try{a.call(m,e,n,o,t)}catch(e){(0,c.kP)(H,1,74,"send request notification failed: "+e)}}),r||o,0)}),(function(){return{batches:ee(e),reason:n,isSync:o,sendSync:r,sendType:t}}),!o)}}}e.initialize=function(e,n,t,r,s){var d;s||(s={}),B=e+B,X=!!(0,i.o8)(s.avoidOptions)||!s.avoidOptions,R=n,C=n.getCookieMgr(),q=!R.config.disableEventTimings;var l=!!R.config.enableCompoundKey;H=(k=t).diagLog();var f=s.valueSanitizer,h=s.stringifyObjects;(0,i.o8)(s.enableCompoundKey)||(l=!!s.enableCompoundKey),E=s.xhrTimeout,O=s.disableXhrSync,M=!(0,u.b$)(),j=new p.e(R,f,h,l);var v=r,y=s.alwaysUseXhrOverride?r:null,g=s.alwaysUseXhrOverride?r:null;if(!r){A=!1;var m=(0,u.k$)();m&&m.protocol&&"file:"===m.protocol.toLowerCase()&&(a=!1);var S=[];S=(0,u.b$)()?[2,1]:[1,2,3];var b=s.transports;b&&((0,i.hj)(b)?S=[b].concat(S):(0,i.kJ)(b)&&(S=b.concat(S))),r=o(S,!1),v=o(S,!0),r||(0,c.jV)(H,"No available transport to send events")}(d={})[0]=r,d[1]=v||o([1,2,3],!0),d[2]=y||o([3,2],!0)||v||o([1],!0),d[3]=g||o([2,3],!0)||v||o([1],!0),P=d},e._getDbgPlgTargets=function(){return[P[0],K,j,P]},e.addQueryStringParameter=function(e,n){for(var t=0;t<F.length;t++)if(F[t].name===e)return void(F[t].value=n);F.push({name:e,value:n})},e.addHeader=function(e,n){U[e]=n},e.canSendRequest=function(){return N()&&L.allowRequestSending()},e.sendQueuedRequests=function(e,n){(0,i.o8)(e)&&(e=0),V&&(e=Z(e),n=2),J(W,e,0)&&ne(Q(),0,!1,e,n||0)},e.isCompletelyIdle=function(){return!x&&0===z&&0===W.length},e.setUnloading=function(e){V=e},e.addBatch=function(e){if(e&&e.count()>0){if(K.isTenantKilled(e.iKey()))return!1;W.push(e)}return!0},e.teardown=function(){W.length>0&&ne(Q(),0,!0,2,2)},e.pause=function(){x=!0},e.resume=function(){x=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,n,t){e&&e.count()>0&&((0,i.le)(n)&&(n=1),V&&(n=Z(n),t=2),ne([e],0,!1,n,t||0))}}))}return e.__ieDyn=1,e}()}}]);